<div class="details-page">
  <app-banner title="Employee Tax Details"></app-banner>
  @let emp = this.store.employee(); @if ( emp) {
  <div class="container page">
    <div class="row">
      <div class="col-md-9">
        <div class="mat-elevation-z8">
          <mat-card
            class="employee-details-card"
            style="max-width: 400px; margin: auto"
          >
            <mat-card-title class="employee-name">
              {{ emp.firstName }} {{ emp.lastName }}
            </mat-card-title>

            <mat-card-subtitle class="gross-salary">
              <label>Gross Annual Salary: £{{emp.grossAnnualSalary}}</label>

              <mat-icon (click)="toggleSalaryEdit()">edit</mat-icon>
            </mat-card-subtitle>
            @if (this.isEditingSalary()) {
            <lib-employee-salary-update
              [salary]="emp.grossAnnualSalary"
              (salaryUpdated)="updateSalary($event)"
            ></lib-employee-salary-update>
            }
            <mat-divider></mat-divider>

            <mat-list>
              <mat-list-item>
                <span class="label">Gross Annual Salary:</span>
                <span class="value">
                  £{{ emp.grossAnnualSalary | number:'1.0-2' }}</span
                >
              </mat-list-item>
              <mat-list-item>
                <span class="label">Gross Monthly Salary:</span>
                <span class="value">
                  £{{ (emp.grossAnnualSalary / 12) | number:'1.2-2' }}</span
                >
              </mat-list-item>
              <mat-list-item>
                <span class="label">Net Annual Salary:</span>
                <span class="value">
                  £{{emp.netAnnualSalary | number:'1.0-2' }}</span
                >
              </mat-list-item>
              <mat-list-item>
                <span class="label">Net Monthly Salary:</span>
                <span class="value">
                  £{{ (emp.netAnnualSalary / 12) | number:'1.2-2' }}</span
                >
              </mat-list-item>
              <mat-list-item>
                <span class="label">Annual Tax Paid:</span>
                <span class="value">
                  £{{ emp.annualTaxPaid | number:'1.2-2' }}</span
                >
              </mat-list-item>
              <mat-list-item>
                <span class="label">Monthly Tax Paid:</span>
                <span class="value">
                  £{{ (emp.annualTaxPaid / 12) | number:'1.2-2' }}</span
                >
              </mat-list-item>
            </mat-list>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
  }
</div>
